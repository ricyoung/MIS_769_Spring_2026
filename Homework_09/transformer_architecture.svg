<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1344 768" width="1344" height="768">
  <defs>
    <linearGradient id="encoderGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#4ecdc4;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#26a69a;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="decoderGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#ff6b6b;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#cc4444;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="attnGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#ffd700;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#cc9900;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="ffnGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#9966cc;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#7744aa;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="embedGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#4a9eff;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#0066cc;stop-opacity:1" />
    </linearGradient>

    <filter id="shadow" x="-20%" y="-20%" width="140%" height="140%">
      <feDropShadow dx="2" dy="3" stdDeviation="3" flood-opacity="0.3"/>
    </filter>
    <filter id="glow" x="-50%" y="-50%" width="200%" height="200%">
      <feGaussianBlur stdDeviation="3" result="coloredBlur"/>
      <feMerge>
        <feMergeNode in="coloredBlur"/>
        <feMergeNode in="SourceGraphic"/>
      </feMerge>
    </filter>

    <marker id="arrowUp" markerWidth="8" markerHeight="6" refX="4" refY="6" orient="auto">
      <polygon points="0 6, 4 0, 8 6" fill="#666"/>
    </marker>
    <marker id="arrowRight" markerWidth="8" markerHeight="6" refX="7" refY="3" orient="auto">
      <polygon points="0 0, 8 3, 0 6" fill="#666"/>
    </marker>
  </defs>

  <!-- Background -->
  <rect width="1344" height="768" fill="#1a1a2e"/>

  <!-- Title -->
  <text x="672" y="40" font-family="SF Pro Display, SF Pro, -apple-system, sans-serif" font-size="32" font-weight="bold" fill="white" text-anchor="middle">Transformer Architecture</text>
  <text x="672" y="70" font-family="SF Pro Display, SF Pro, -apple-system, sans-serif" font-size="18" fill="#888" text-anchor="middle">"Attention Is All You Need" (Vaswani et al., 2017)</text>

  <!-- Encoder Stack -->
  <g transform="translate(200, 100)">
    <text x="125" y="0" font-family="SF Pro Display, SF Pro, -apple-system, sans-serif" font-size="18" font-weight="bold" fill="#4ecdc4" text-anchor="middle">ENCODER</text>

    <!-- Single Encoder Block -->
    <g transform="translate(0, 25)">
      <rect x="0" y="0" width="250" height="320" rx="12" fill="#252540" filter="url(#shadow)"/>
      <rect x="0" y="0" width="250" height="8" rx="4" fill="url(#encoderGrad)"/>

      <!-- Nx label -->
      <text x="230" y="30" font-family="SF Mono, Menlo, monospace" font-size="14" fill="#4ecdc4">×N</text>

      <!-- Multi-Head Attention -->
      <g transform="translate(25, 45)">
        <rect x="0" y="0" width="200" height="60" rx="8" fill="url(#attnGrad)" filter="url(#glow)"/>
        <text x="100" y="25" font-family="SF Pro Display, SF Pro, -apple-system, sans-serif" font-size="13" fill="white" text-anchor="middle" font-weight="bold">Multi-Head</text>
        <text x="100" y="45" font-family="SF Pro Display, SF Pro, -apple-system, sans-serif" font-size="13" fill="white" text-anchor="middle" font-weight="bold">Self-Attention</text>
      </g>

      <!-- Add & Norm -->
      <g transform="translate(25, 115)">
        <rect x="0" y="0" width="200" height="30" rx="6" fill="#1a1a2e" stroke="#4ecdc4" stroke-width="1"/>
        <text x="100" y="20" font-family="SF Pro Display, SF Pro, -apple-system, sans-serif" font-size="12" fill="#4ecdc4" text-anchor="middle">Add &amp; Norm</text>
      </g>

      <!-- Feed Forward -->
      <g transform="translate(25, 160)">
        <rect x="0" y="0" width="200" height="60" rx="8" fill="url(#ffnGrad)" filter="url(#glow)"/>
        <text x="100" y="25" font-family="SF Pro Display, SF Pro, -apple-system, sans-serif" font-size="13" fill="white" text-anchor="middle" font-weight="bold">Feed Forward</text>
        <text x="100" y="45" font-family="SF Pro Display, SF Pro, -apple-system, sans-serif" font-size="12" fill="rgba(255,255,255,0.8)" text-anchor="middle">FFN(x) = ReLU(xW₁)W₂</text>
      </g>

      <!-- Add & Norm -->
      <g transform="translate(25, 230)">
        <rect x="0" y="0" width="200" height="30" rx="6" fill="#1a1a2e" stroke="#4ecdc4" stroke-width="1"/>
        <text x="100" y="20" font-family="SF Pro Display, SF Pro, -apple-system, sans-serif" font-size="12" fill="#4ecdc4" text-anchor="middle">Add &amp; Norm</text>
      </g>

      <!-- Residual connections -->
      <path d="M 15 75 L 15 130" fill="none" stroke="#4ecdc4" stroke-width="1.5" stroke-dasharray="4,2"/>
      <path d="M 15 190 L 15 245" fill="none" stroke="#4ecdc4" stroke-width="1.5" stroke-dasharray="4,2"/>

      <!-- Output arrow -->
      <line x1="125" y1="270" x2="125" y2="300" stroke="#4ecdc4" stroke-width="2" marker-end="url(#arrowUp)"/>
    </g>

    <!-- Input Embedding -->
    <g transform="translate(0, 370)">
      <rect x="0" y="0" width="250" height="50" rx="8" fill="url(#embedGrad)"/>
      <text x="125" y="30" font-family="SF Pro Display, SF Pro, -apple-system, sans-serif" font-size="14" fill="white" text-anchor="middle" font-weight="bold">Input Embedding + Positional Encoding</text>
    </g>

    <!-- Input arrow -->
    <line x1="125" y1="440" x2="125" y2="420" stroke="#4a9eff" stroke-width="2"/>
    <text x="125" y="460" font-family="SF Mono, Menlo, monospace" font-size="12" fill="#888" text-anchor="middle">Inputs</text>
  </g>

  <!-- Decoder Stack -->
  <g transform="translate(550, 100)">
    <text x="175" y="0" font-family="SF Pro Display, SF Pro, -apple-system, sans-serif" font-size="18" font-weight="bold" fill="#ff6b6b" text-anchor="middle">DECODER</text>

    <!-- Single Decoder Block -->
    <g transform="translate(0, 25)">
      <rect x="0" y="0" width="350" height="420" rx="12" fill="#252540" filter="url(#shadow)"/>
      <rect x="0" y="0" width="350" height="8" rx="4" fill="url(#decoderGrad)"/>

      <!-- Nx label -->
      <text x="330" y="30" font-family="SF Mono, Menlo, monospace" font-size="14" fill="#ff6b6b">×N</text>

      <!-- Masked Multi-Head Attention -->
      <g transform="translate(75, 40)">
        <rect x="0" y="0" width="200" height="55" rx="8" fill="url(#attnGrad)" filter="url(#glow)"/>
        <text x="100" y="22" font-family="SF Pro Display, SF Pro, -apple-system, sans-serif" font-size="12" fill="white" text-anchor="middle" font-weight="bold">Masked Multi-Head</text>
        <text x="100" y="42" font-family="SF Pro Display, SF Pro, -apple-system, sans-serif" font-size="12" fill="white" text-anchor="middle" font-weight="bold">Self-Attention</text>
      </g>

      <!-- Add & Norm -->
      <g transform="translate(75, 105)">
        <rect x="0" y="0" width="200" height="25" rx="5" fill="#1a1a2e" stroke="#ff6b6b" stroke-width="1"/>
        <text x="100" y="17" font-family="SF Pro Display, SF Pro, -apple-system, sans-serif" font-size="11" fill="#ff6b6b" text-anchor="middle">Add &amp; Norm</text>
      </g>

      <!-- Cross Attention -->
      <g transform="translate(75, 145)">
        <rect x="0" y="0" width="200" height="55" rx="8" fill="url(#attnGrad)" filter="url(#glow)"/>
        <text x="100" y="22" font-family="SF Pro Display, SF Pro, -apple-system, sans-serif" font-size="12" fill="white" text-anchor="middle" font-weight="bold">Multi-Head</text>
        <text x="100" y="42" font-family="SF Pro Display, SF Pro, -apple-system, sans-serif" font-size="12" fill="white" text-anchor="middle" font-weight="bold">Cross-Attention</text>
      </g>

      <!-- Encoder connection arrow -->
      <path d="M -50 172 L 75 172" fill="none" stroke="#4ecdc4" stroke-width="2" stroke-dasharray="6,3" marker-end="url(#arrowRight)"/>
      <text x="-65" y="165" font-family="SF Mono, Menlo, monospace" font-size="10" fill="#4ecdc4">K, V</text>

      <!-- Add & Norm -->
      <g transform="translate(75, 210)">
        <rect x="0" y="0" width="200" height="25" rx="5" fill="#1a1a2e" stroke="#ff6b6b" stroke-width="1"/>
        <text x="100" y="17" font-family="SF Pro Display, SF Pro, -apple-system, sans-serif" font-size="11" fill="#ff6b6b" text-anchor="middle">Add &amp; Norm</text>
      </g>

      <!-- Feed Forward -->
      <g transform="translate(75, 250)">
        <rect x="0" y="0" width="200" height="55" rx="8" fill="url(#ffnGrad)" filter="url(#glow)"/>
        <text x="100" y="22" font-family="SF Pro Display, SF Pro, -apple-system, sans-serif" font-size="13" fill="white" text-anchor="middle" font-weight="bold">Feed Forward</text>
        <text x="100" y="42" font-family="SF Pro Display, SF Pro, -apple-system, sans-serif" font-size="11" fill="rgba(255,255,255,0.8)" text-anchor="middle">Position-wise FFN</text>
      </g>

      <!-- Add & Norm -->
      <g transform="translate(75, 315)">
        <rect x="0" y="0" width="200" height="25" rx="5" fill="#1a1a2e" stroke="#ff6b6b" stroke-width="1"/>
        <text x="100" y="17" font-family="SF Pro Display, SF Pro, -apple-system, sans-serif" font-size="11" fill="#ff6b6b" text-anchor="middle">Add &amp; Norm</text>
      </g>

      <!-- Residual connections -->
      <path d="M 60 67 L 60 117" fill="none" stroke="#ff6b6b" stroke-width="1.5" stroke-dasharray="4,2"/>
      <path d="M 60 172 L 60 222" fill="none" stroke="#ff6b6b" stroke-width="1.5" stroke-dasharray="4,2"/>
      <path d="M 60 277 L 60 327" fill="none" stroke="#ff6b6b" stroke-width="1.5" stroke-dasharray="4,2"/>

      <!-- Output arrow -->
      <line x1="175" y1="350" x2="175" y2="395" stroke="#ff6b6b" stroke-width="2"/>
    </g>

    <!-- Linear + Softmax -->
    <g transform="translate(50, 445)">
      <rect x="0" y="0" width="250" height="40" rx="8" fill="#1a1a2e" stroke="#ffd700" stroke-width="2"/>
      <text x="125" y="25" font-family="SF Pro Display, SF Pro, -apple-system, sans-serif" font-size="13" fill="#ffd700" text-anchor="middle">Linear → Softmax</text>
    </g>

    <!-- Output Probabilities -->
    <g transform="translate(50, 500)">
      <text x="125" y="15" font-family="SF Mono, Menlo, monospace" font-size="12" fill="#888" text-anchor="middle">Output Probabilities</text>
    </g>

    <!-- Output Embedding -->
    <g transform="translate(50, 530)">
      <rect x="0" y="0" width="250" height="40" rx="8" fill="url(#embedGrad)"/>
      <text x="125" y="25" font-family="SF Pro Display, SF Pro, -apple-system, sans-serif" font-size="13" fill="white" text-anchor="middle" font-weight="bold">Output Embedding + Pos Enc</text>
    </g>

    <!-- Input arrow -->
    <line x1="175" y1="590" x2="175" y2="570" stroke="#4a9eff" stroke-width="2"/>
    <text x="175" y="610" font-family="SF Mono, Menlo, monospace" font-size="12" fill="#888" text-anchor="middle">Outputs (shifted right)</text>
  </g>

  <!-- Key Innovations Box -->
  <g transform="translate(970, 100)">
    <rect x="0" y="0" width="300" height="280" rx="12" fill="#252540" filter="url(#shadow)"/>
    <rect x="0" y="0" width="300" height="8" rx="4" fill="#ffd700"/>

    <text x="150" y="40" font-family="SF Pro Display, SF Pro, -apple-system, sans-serif" font-size="16" font-weight="bold" fill="white" text-anchor="middle">Key Innovations</text>

    <g transform="translate(20, 65)">
      <circle r="6" fill="#ffd700"/>
      <text x="15" y="5" font-family="SF Pro Display, SF Pro, -apple-system, sans-serif" font-size="13" fill="#ffd700">Self-Attention</text>
      <text x="15" y="22" font-family="SF Pro Display, SF Pro, -apple-system, sans-serif" font-size="11" fill="#888">Captures relationships in parallel</text>
    </g>

    <g transform="translate(20, 115)">
      <circle r="6" fill="#4ecdc4"/>
      <text x="15" y="5" font-family="SF Pro Display, SF Pro, -apple-system, sans-serif" font-size="13" fill="#4ecdc4">Positional Encoding</text>
      <text x="15" y="22" font-family="SF Pro Display, SF Pro, -apple-system, sans-serif" font-size="11" fill="#888">Injects sequence order info</text>
    </g>

    <g transform="translate(20, 165)">
      <circle r="6" fill="#ff6b6b"/>
      <text x="15" y="5" font-family="SF Pro Display, SF Pro, -apple-system, sans-serif" font-size="13" fill="#ff6b6b">Masked Attention</text>
      <text x="15" y="22" font-family="SF Pro Display, SF Pro, -apple-system, sans-serif" font-size="11" fill="#888">Prevents looking at future tokens</text>
    </g>

    <g transform="translate(20, 215)">
      <circle r="6" fill="#9966cc"/>
      <text x="15" y="5" font-family="SF Pro Display, SF Pro, -apple-system, sans-serif" font-size="13" fill="#9966cc">Residual Connections</text>
      <text x="15" y="22" font-family="SF Pro Display, SF Pro, -apple-system, sans-serif" font-size="11" fill="#888">Enable training deep networks</text>
    </g>
  </g>

  <!-- Positional Encoding Formula -->
  <g transform="translate(970, 400)">
    <rect x="0" y="0" width="300" height="120" rx="12" fill="#252540" filter="url(#shadow)"/>
    <rect x="0" y="0" width="300" height="8" rx="4" fill="#4a9eff"/>

    <text x="150" y="35" font-family="SF Pro Display, SF Pro, -apple-system, sans-serif" font-size="14" font-weight="bold" fill="white" text-anchor="middle">Positional Encoding</text>

    <text x="150" y="65" font-family="SF Mono, Menlo, monospace" font-size="11" fill="#4a9eff" text-anchor="middle">PE(pos, 2i) = sin(pos/10000^(2i/d))</text>
    <text x="150" y="85" font-family="SF Mono, Menlo, monospace" font-size="11" fill="#4a9eff" text-anchor="middle">PE(pos, 2i+1) = cos(pos/10000^(2i/d))</text>
    <text x="150" y="108" font-family="SF Pro Display, SF Pro, -apple-system, sans-serif" font-size="10" fill="#888" text-anchor="middle">Sinusoidal functions encode position</text>
  </g>

  <!-- Model Variants -->
  <g transform="translate(970, 540)">
    <rect x="0" y="0" width="300" height="150" rx="12" fill="#252540" filter="url(#shadow)"/>
    <rect x="0" y="0" width="300" height="8" rx="4" fill="#9966cc"/>

    <text x="150" y="35" font-family="SF Pro Display, SF Pro, -apple-system, sans-serif" font-size="14" font-weight="bold" fill="white" text-anchor="middle">Transformer Variants</text>

    <g transform="translate(20, 55)">
      <rect x="0" y="0" width="120" height="35" rx="6" fill="#4ecdc4"/>
      <text x="60" y="15" font-family="SF Pro Display, SF Pro, -apple-system, sans-serif" font-size="11" fill="white" text-anchor="middle" font-weight="bold">BERT</text>
      <text x="60" y="28" font-family="SF Pro Display, SF Pro, -apple-system, sans-serif" font-size="9" fill="rgba(255,255,255,0.8)" text-anchor="middle">Encoder only</text>
    </g>

    <g transform="translate(160, 55)">
      <rect x="0" y="0" width="120" height="35" rx="6" fill="#ff6b6b"/>
      <text x="60" y="15" font-family="SF Pro Display, SF Pro, -apple-system, sans-serif" font-size="11" fill="white" text-anchor="middle" font-weight="bold">GPT</text>
      <text x="60" y="28" font-family="SF Pro Display, SF Pro, -apple-system, sans-serif" font-size="9" fill="rgba(255,255,255,0.8)" text-anchor="middle">Decoder only</text>
    </g>

    <g transform="translate(90, 100)">
      <rect x="0" y="0" width="120" height="35" rx="6" fill="#9966cc"/>
      <text x="60" y="15" font-family="SF Pro Display, SF Pro, -apple-system, sans-serif" font-size="11" fill="white" text-anchor="middle" font-weight="bold">T5</text>
      <text x="60" y="28" font-family="SF Pro Display, SF Pro, -apple-system, sans-serif" font-size="9" fill="rgba(255,255,255,0.8)" text-anchor="middle">Encoder-Decoder</text>
    </g>
  </g>

  <!-- Footer -->
  <g transform="translate(672, 720)">
    <text font-family="SF Pro Display, SF Pro, -apple-system, sans-serif" font-size="13" fill="#666" text-anchor="middle">
      The foundation of modern LLMs: GPT, BERT, T5, Claude, ChatGPT, and more
    </text>
  </g>

</svg>
